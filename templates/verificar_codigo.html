{% extends "base.html" %}
{% block title %}Verificar CÃ³digo / NotaÃ§Ã£o{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm border-0 rounded-3">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">ğŸ” Verificar Registro</h4>
    </div>

    <div class="card-body">
      <form method="POST" class="row g-3 align-items-end">
        <div class="col-md-5">
          <label class="form-label fw-semibold">CÃ³digo de ReferÃªncia</label>
          <input
            type="text"
            name="codigo_referencia"
            class="form-control"
            placeholder="Ex: BR_RJANRIO_R0_TESTE001"
            value="{{ codigo or '' }}"
          >
          <div class="form-text">Busca nÃ£o diferencia maiÃºsculas/minÃºsculas.</div>
        </div>

        <div class="col-md-5">
          <label class="form-label fw-semibold">NotaÃ§Ã£o</label>
          <input
            type="text"
            name="notacao"
            class="form-control"
            placeholder="Ex: Livro 2-A"
            value="{{ notacao or '' }}"
          >
          <div class="form-text">Pode preencher CÃ³digo OU NotaÃ§Ã£o.</div>
        </div>

        <div class="col-md-2">
          <button type="submit" class="btn btn-success w-100">
            ğŸ” Buscar
          </button>
        </div>
      </form>

      <hr class="my-4">

      {% if registro %}
        <div class="alert alert-success">
          âœ… Registro encontrado! VocÃª pode editar.
        </div>

        <a href="{{ url_for('editar_registro', id=registro.id) }}" class="btn btn-outline-warning">
          âœï¸ Editar registro #{{ registro.id }}
        </a>
      {% endif %}

      {% if nao_encontrado %}
        <div class="alert alert-warning mt-3">
          Nenhum registro encontrado.
        </div>

        {% if tipo_busca == 'codigo' %}
          <a class="btn btn-primary"
             href="{{ url_for('inserir_dados') }}?codigo={{ (codigo or '')|urlencode }}">
            â• Inserir novo com esse cÃ³digo
          </a>
        {% elif tipo_busca == 'notacao' %}
          <a class="btn btn-primary"
             href="{{ url_for('inserir_dados') }}?notacao={{ (notacao or '')|urlencode }}">
            â• Inserir novo com essa notaÃ§Ã£o
          </a>
        {% endif %}
      {% endif %}

      <div class="d-flex gap-2 mt-4">
        <a href="{{ url_for('home') }}" class="btn btn-outline-secondary">
          â¬…ï¸ Voltar para Home
        </a>
        <a href="{{ url_for('pesquisar_divisao') }}" class="btn btn-outline-primary">
          ğŸ“ Pesquisar por DivisÃ£o
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
